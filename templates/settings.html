{% extends "topic/base.html" %}

{% block title %}
    设置
{% endblock %}

{% block sidebar %}
    {{ super() }}
    <div class="panel">
        <div class="inner">
            <a href="/topic/new?board_id={{ bid }}" class="create_topic_btn">
                <span class="span-success">发布话题</span>
            </a>
        </div>
    </div>
{% endblock %}

{% block content %}
    <div id="content">
        <div class="panel">
            <div class="header">
                <ul class="breadcrumb">
                    <li><a href="{{ url_for('gua_topic.index') }}">主页</a><span class="divider">/</span></li>
                    <li class="active">设置</li>
                </ul>
            </div>
            <div class="inner">

                <form id="setting_form" class="form-horizontal"
                      action="{{ url_for('gua_user.profile', token = token) }}" method="post">
                    <div class="control-group">
                        <label class="control-label" for="name">用户名</label>

                        <div class="controls">
                            <input class="input-xlarge readonly" id="name" name="username" size="30" type="text"
                                   value="{{ user.username }}">
                        </div>
                    </div>

                    <div class="control-group">
                        <label class="control-label" for="signature">个性签名</label>

                        <div class="controls">
                            <textarea class="input-xlarge" id="signature" name="signature" size="30">{{ user.signature }}</textarea>
                        </div>
                    </div>

                    <div class="form-actions">
                        <input type="submit" class="span-primary submit_btn" data-loading-text="保存中.." value="保存设置">
                    </div>
                </form>
            </div>
        </div>

        <div class="panel">
            <div class="header">
                <span class="col_fade">更改密码</span>
            </div>
            <div class="inner">
                <form id="change_pass_form" class="form-horizontal" action="{{ url_for('gua_user.change_password', token = token) }}" method="post">
                    <div class="control-group">
                        <label class="control-label" for="old_pass">当前密码</label>

                        <div class="controls">
                            <input class="input-xlarge" type="password" id="old_pass" name="old_pass" size="30">
                        </div>
                    </div>
                    <div class="control-group">
                        <label class="control-label" for="new_pass">新密码</label>

                        <div class="controls">
                            <input class="input-xlarge" type="password" id="new_pass" name="new_pass" size="30">
                        </div>
                    </div>

                    <div class="form-actions">
                        <input type="submit" class="span-primary submit_btn" data-loading-text="更改中.." value="更改密码">
                    </div>
                </form>
            </div>
        </div>

        <div class="panel">
            <div class="header">
                <span class="col_fade">上传头像</span>
            </div>
            <div class="inner">
                <form id="change_avatar_form"
                      class="form-horizontal"
                      action="{{ url_for('gua_user.change_avatar', token = token) }}"
                      enctype="multipart/form-data"
                      method="post"
                >
                    <div class="control-group">
{#                        <label class="control-label" for="old_pass">当前密码</label>#}

                        <div class="controls">
                            <input class="input-xlarge" type="file" name="avatar" size="30">
                        </div>
                    </div>


                    <div class="form-actions">
                        <input type="submit" class="span-primary submit_btn" data-loading-text="上传中.." value="上传头像">
                    </div>
                </form>
            </div>
        </div>
    </div>
{% endblock %}